DROP TABLE IF EXISTS users;

CREATE  TABLE users 
(
user_id INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL,
first_name VARCHAR(255) NOT NULL,
last_name VARCHAR(255) NOT NULL,
username VARCHAR(255) NOT NULL  UNIQUE,
password VARCHAR(255) NOT NULL,
email VARCHAR(255),
records_indexed VARCHAR(255) NOT NULL  DEFAULT 0
);

DROP TABLE IF EXISTS projects;

CREATE  TABLE projects 
(
project_id INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL,
name VARCHAR(255) NOT NULL  UNIQUE,
records_per_image INTEGER NOT NULL,
first_y_coord INTEGER NOT NULL,
record_height INTEGER NOT NULL,
sample_image VARCHAR(255) NOT NULL  UNIQUE
);

DROP TABLE IF EXISTS fields;

CREATE TABLE fields
(
field_id INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL,
name VARCHAR(255) NOT NULL UNIQUE,
description_filename VARCHAR(255) NOT NULL,
dictionary_filename VARCHAR(255) NOT NULL
);

DROP TABLE IF EXISTS project_field;

CREATE TABLE project_field
(
field_project_id INTEGER PRIMARY KEY  AUTOINCREMENT NOT NULL,
field_id INTEGER NOT NULL,
project_id INTEGER NOT NULL,
x_coord INTEGER NOT NULL,
width INTEGER NOT NULL
);

DROP TABLE IF EXISTS batches;

CREATE TABLE batches
(
batch_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
project_id INTEGER NOT NULL,
image_file VARCHAR(255) NOT NULL,
indexed BOOL NOT NULL
);

DROP TABLE IF EXISTS field_results;

CREATE TABLE field_results
(
field_result_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
field_id INTEGER NOT NULL,
batch_id INTEGER NOT NULL,
batch_row INTEGER NOT NULL,
result VARCHAR(255)
);